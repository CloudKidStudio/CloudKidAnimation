!function(){var t=function(){},e=t.prototype;e.onComplete=null,e.onCompleteParams=null,e.event=null,e.instance=null,e.firstFrame=-1,e.lastFrame=-1,e.isLooping=!1,e.timePassed=0,e.realStartFrame=0,e.isLastFrame=!1,e.length=0,e.dropFrames=!1,e._isPaused=!1,e.getPaused=function(){return this._isPaused},e.setPaused=function(t){this._isPaused=t,this.instance&&(t?this.instance.stop():this.instance.play())},namespace("cloudkid").AnimatorTimeline=t}(),function(t){var e=cloudkid.OS,a=cloudkid.AnimatorTimeline,i=createjs.MovieClip,n=function(){};n.VERSION="1.0.0",n.debug=!1;var r=[],s=[],o={},l=!1;n.useFrameDropping=!1,n.init=function(){r=[],s=[],o={},l=!1,n.useFrameDropping=!1},n.destroy=function(){n.stopAll(),r=null,s=null,o=null},n.play=function(e,a,i,s,l,m,c){i=i||null,s=s||null,l=l||!0,m=m||0,c=c||!1,r||n.init(),o[e.id]!==t&&n.stop(e,c);var u=n._makeTimeline(e,a,i,s,l);return u.firstFrame>-1&&u.lastFrame>-1?(u.realStartFrame=u.firstFrame+m,e.gotoAndPlay(u.realStartFrame),n._hasTimelines()||n._startUpdate(),r.push(u),o[e.id]=u,u):(i&&i.apply(null,s),null)},n.playAtRandomFrame=function(e,a,i,s,l){i=i||null,s=s||null,l=l||!0,r||n.init(),o[e.id]!==t&&n.stop(e,!1);var m=n._makeTimeline(e,a,i,s,l);return m.firstFrame>0&&m.lastFrame>0?(m.realStartFrame=Math.random()*(m.lastFrame-m.firstFrame)+m.firstFrame,e.gotoAndPlay(m.realStartFrame),n._hasTimelines()||n._startUpdate(),r.push(m),o[e.id]=m,m):(n.debug&&Debug.log("No event "+a+" was found, or it lacks an end, on this MovieClip "+e),i&&i.apply(null,s),null)},n._makeTimeline=function(e,n,r,s,o){var l=new a;if(e instanceof i==!1)return l;l.instance=e,l.event=n,l.onComplete=r,l.onCompleteParams=s,l.dropFrames=o;var m=e.timeline.resolve(n),c=e.timeline.resolve(n+"_stop"),u=e.timeline.resolve(n+"_loop");return m!==t&&(l.firstFrame=l.realStartFrame=m),c!==t?l.lastFrame=c:u!==t&&(l.lastFrame=u,l.isLooping=!0),l.length=l.lastFrame-l.firstFrame,l},n.stop=function(e,a){if(a=a||!1,r&&o[e.id]!==t){var i=o[e.id];n._remove(i,a)}},n.stopAll=function(t){if(n._hasTimelines())for(var e,a=r.slice(),i=0;i<a.length;i++)e=a[i],(!t||t.contains(e.instance))&&n._remove(e,!1)},n._remove=function(t,e){var a=s.indexOf(t);if(a>=0&&s.splice(a,1),a=r.indexOf(t),!(0>a)){var i=t.onComplete,l=t.onCompleteParams;t.instance.stop(),r.splice(a,1),delete o[t.instance.id],t.instance=null,t.event=null,t.onComplete=null,t.onCompleteParams=null,n._hasTimelines()||n._stopUpdate(),e&&i&&i.apply(null,l)}},n.pause=function(){if(r&&!l){l=!0;for(var t=0;t<r.length;t++)r[t].setPaused(!0);n._stopUpdate()}},n.resume=function(){if(r&&l){l=!1;for(var t=0;t<r.length;t++)r[t].setPaused(!1);n._hasTimelines()&&n._startUpdate()}},n.pauseInGroup=function(t,e){if(n._hasTimelines()&&e)for(var a=0;a<r.length;a++)e.contains(r[a].instance)&&r[a].setPaused(t)},n.getTimeline=function(e){return n._hasTimelines()?o[e.id]!==t?o[e.id]:null:null},n.getPaused=function(){return l},n._startUpdate=function(){e.instance&&e.instance.addUpdateCallback("Animator",n._update)},n._stopUpdate=function(){e.instance&&e.instance.removeUpdateCallback("Animator")},n._update=function(t){if(r){var a=0,i=0,o=0;n.useFrameDropping&&(i=e.instance.fps,o=1e3/i,i*=.001);for(var l,m,c,u=0;u<r.length;u++)if(l=r[u],!l.getPaused())if(m=l.instance,c=m.timeline.position||0,c>=l.lastFrame||c<l.firstFrame||l.isLastFrame){if(c==l.lastFrame&&!l.isLastFrame){l.isLastFrame=!0,n.useFrameDropping&&l.dropFrames&&(l.timePassed+=o>t?o:t),m.stop();continue}l.isLooping?(l.isLastFrame&&(l.isLastFrame=!1),n.useFrameDropping&&l.dropFrames?1==c&&l.firstFrame>1?(m.gotoAndPlay(l.firstFrame),l.timePassed=0):(l.timePassed+=o>t?o:t,a=Math.round(l.timePassed*i)+l.realStartFrame,a-=l.firstFrame,a=a%l.length+l.firstFrame,l.timePassed=Math.round((a-l.firstFrame)/i),l.realStartFrame=l.firstFrame,m.gotoAndPlay(a)):m.gotoAndPlay(l.firstFrame),l.onComplete&&l.onComplete.apply(null,l.onCompleteParams)):(m.gotoAndStop(l.lastFrame),s.push(l))}else if(n.useFrameDropping&&l.dropFrames&&(l.timePassed+=o>t?o:t,a=Math.round(l.timePassed*i)+l.realStartFrame,a>c))if(a>=l.lastFrame){if(a==l.lastFrame){l.isLastFrame=!0,m.gotoAndStop(a);continue}l.isLooping?(a-=l.firstFrame,a=a%l.length+l.firstFrame,m.gotoAndPlay(a),l.timePassed=Math.round((a-l.firstFrame)/i),l.realStartFrame=l.firstFrame,l.onComplete&&l.onComplete.apply(null,l.onCompleteParams)):(m.gotoAndStop(l.lastFrame),s.push(l))}else m.gotoAndPlay(a);for(u=0;u<s.length;u++)l=s[u],n._remove(l,!0)}},n._hasTimelines=function(){return r?r.length>0:!1},n.toString=function(){return"[Animator version:"+n.VERSION+"]"},namespace("cloudkid").Animator=n}(),function(){var t=function(t,e){this.initialize(t,e)},e=t.prototype;e.event=null,e.loops=0,e.initialize=function(t,e){this.event=t,this.loops=e||0},namespace("cloudkid").CharacterClip=t}(),function(){var t=cloudkid.Animator,e=function(){this.initialize()},a=e.prototype;p_animationStack=null,a._currentAnimation=null,a._loops=0,a._interruptable=!0,a._allowFrameDropping=!1,a._character=null,a._callback=null,a._destroyed=!1,a.initialize=function(){this._animationStack=[]},a.setCharacter=function(t){this.clear(),this._character=t,this._character&&(Debug.assert(this._character instanceof createjs.MovieClip,"character must subclass MovieClip"),this._character.stop())},a.gotoFrameAndStop=function(e){Debug.assert(this._character,"gotoFrameAndStop() requires a character!"),t.stop(this._character),this._animationStack.length=0,this._character.gotoAndStop(e)},a.playClips=function(e,a,i,n,r){if(a=a||null,i=i||!0,n=n||!0,r=r||!0,Debug.assert(this._character,"playClips requires a character!"),this._interruptable){t.stop(this._character),this._interruptable=i,this._callback&&!n&&this._callback(!0),this._callback=a,this._animationStack.length=0;for(var s in e)this._animationStack.push(e[s]);this._allowFrameDropping=r,this.startNext()}},a.startNext=function(){if(this._loops=0,this._animationStack.length>0)this._currentAnimation=this._animationStack.shift(),t.play(this._character,this._currentAnimation.event,this._animationComplete.bind(this),[this],this._allowFrameDropping);else if(this._callback){this._interruptable=!0;var e=this._callback;this._callback=null,e(!1)}},a._animationComplete=function(){this._loops++,0===this._currentAnimation.loops||this._loops<this._currentAnimation.loops?t.play(this._character,this._currentAnimation.event,this._animationComplete.bind(this),[],this._allowFrameDropping):this._currentAnimation.loops==this._loops&&this.startNext()},a.clear=function(){this._character&&t.stop(this._character),this._currentAnimation=null,this._interruptable=!0,this._callback=null,this._animationStack.length=0,this._loops=0},a.destroy=function(){this._destroyed||(this._destroyed=!0,this.clear(),this._character=null,this._animationStack=null)},namespace("cloudkid").CharacterController=e}();