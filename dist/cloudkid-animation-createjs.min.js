!function(){"use strict";var t=function(){},n=t.prototype;n.onComplete=null,n.onCompleteParams=null,n.event=null,n.instance=null,n.firstFrame=-1,n.lastFrame=-1,n.isLooping=!1,n.isLastFrame=!1,n.length=0,n.useCaptions=!1,n._paused=!1,Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){t!=this._paused&&(this._paused=!!t,this.soundInst&&(this.paused?this.soundInst.pause():this.soundInst.unpause()))}}),n.startTime=0,n.duration=0,n.speed=1,n.time=0,n.soundAlias=null,n.soundInst=null,n.playSound=!1,n.soundStart=0,n.soundEnd=0,namespace("cloudkid").AnimatorTimeline=t}(),function(t){"use strict";var n=cloudkid.OS,i=cloudkid.AnimatorTimeline,a=(createjs.MovieClip,function(){});a.VERSION="2.2.4",a.debug=!1,a.soundLib=null,a.captions=null;var e=[],s=[],o={},l=!1,r={};a.init=function(){e=[],s=[],o={},l=!1},a.destroy=function(){a.stopAll(),e=null,s=null,o=null},a.play=function(n,i,s,l,u,c,p,d){var h;s&&"function"==typeof s?(h=s,s=r):s||(s=r),h=s.onComplete||h||null,l=s.onCompleteParams||l||null,u=s.startTime||u,u=u?.001*u:0,c=s.speed||c||1,d=s.doCancelledCallback||d||!1,p=s.soundData||p||null,e||a.init(),o[n.id]!==t&&a.stop(n,d);var m=a._makeTimeline(n,i,h,l,c,p);return m.firstFrame>-1&&m.lastFrame>-1?(m.time=-1==u?Math.random()*m.duration:u,n.elapsedTime=m.startTime+m.time,n.play(),n._tick(),a._hasTimelines()||a._startUpdate(),e.push(m),o[n.id]=m,m):(h&&h.apply(null,l),null)},a.playAtRandomFrame=function(t,n,i,e,s,o,l){return a.play(t,n,i,e,-1,s,o,l)},a._makeTimeline=function(t,n,e,s,o,l){var r=new i;t.advanceDuringTicks=!1;var u;t.framerate?u=t.framerate:(u=cloudkid.OS.instance.options.fps,u||(u=cloudkid.OS.instance.fps),u||(u=15),t.framerate=u),r.instance=t,r.event=n,r.onComplete=e,r.onCompleteParams=s,r.speed=o,l&&(r.playSound=!0,"string"==typeof l?(r.soundStart=0,r.soundAlias=l):(r.soundStart=l.start>0?l.start:0,r.soundAlias=l.alias),r.useCaptions=a.captions&&a.captions.hasCaption(r.soundAlias));for(var c=t.getLabels(),p=n+"_stop",d=n+"_loop",h=0,m=c.length;m>h;++h){var _=c[h];if(_.label==n)r.firstFrame=_.position;else{if(_.label==p){r.lastFrame=_.position;break}if(_.label==d){r.lastFrame=_.position,r.isLooping=!0;break}}}return r.length=r.lastFrame-r.firstFrame,r.startTime=r.firstFrame/u,r.duration=r.length/u,r},a.instanceHasAnimation=function(t,n){for(var i=t.getLabels(),a=-1,e=-1,s=n+"_stop",o=n+"_loop",l=0,r=i.length;r>l;++l){var u=i[l];if(u.label==n)a=u.position;else if(u.label==s||u.label==o){e=u.position;break}}return a>=0&&e>=0},a.stop=function(n,i){if(i=i||!1,e&&o[n.id]!==t){var s=o[n.id];a._remove(s,i)}},a.stopAll=function(t){if(a._hasTimelines())for(var n,i=e.slice(),s=0;s<i.length;s++)n=i[s],(!t||t.contains(n.instance))&&a._remove(n,!1)},a._remove=function(t,n){var i=s.indexOf(t);if(i>=0&&s.splice(i,1),i=e.indexOf(t),!(0>i)){var l=t.onComplete,r=t.onCompleteParams;t.instance.stop(),!n&&t.soundInst&&t.soundInst.stop(),e.splice(i,1),delete o[t.instance.id],t.instance=null,t.event=null,t.onComplete=null,t.onCompleteParams=null,a._hasTimelines()||a._stopUpdate(),n&&l&&l.apply(null,r)}},a.pause=function(){if(e&&!l){l=!0;for(var t=0;t<e.length;t++)e[t].paused=!0;a._stopUpdate()}},a.resume=function(){if(e&&l){l=!1;for(var t=0;t<e.length;t++)e[t].paused=!1;a._hasTimelines()&&a._startUpdate()}},a.pauseInGroup=function(t,n){if(a._hasTimelines()&&n)for(var i=0;i<e.length;i++)n.contains(e[i].instance)&&(e[i].paused=t)},a.getTimeline=function(n){return a._hasTimelines()?o[n.id]!==t?o[n.id]:null:null},a.getPaused=function(){return l},a._startUpdate=function(){n.instance&&n.instance.addUpdateCallback("Animator",a._update)},a._stopUpdate=function(){n.instance&&n.instance.removeUpdateCallback("Animator")},a._update=function(t){if(e){for(var n,i=.001*t,o=e.length-1;o>=0;--o){n=e[o];var l=n.instance;if(!n.paused){if(n.soundInst){if(!n.soundInst.isValid){s.push(n);continue}n.time=n.soundStart+.001*n.soundInst.position,n.useCaptions&&a.captions.seek(n.soundInst.position),n.time>=n.duration&&(l.gotoAndStop(n.lastFrame),s.push(n))}else n.time+=i*n.speed,n.time>=n.duration&&(n.isLooping?(n.time-=n.duration,n.onComplete&&n.onComplete.apply(null,n.onCompleteParams)):(l.gotoAndStop(n.lastFrame),s.push(n))),n.playSound&&n.time>=n.soundStart&&(n.time=n.soundStart,n.soundInst=a.audioLib.play(n.soundAlias,c.bind(this,n),u.bind(this,n)),n.useCaptions&&(a.captions.isSlave=!0,a.captions.run(n.soundAlias)));l.elapsedTime=n.startTime+n.time,l._tick()}}for(o=0;o<s.length;o++)n=s[o],a._remove(n,!0)}};var u=function(t){t.playSound=!1,t.soundEnd=t.soundStart+.001*t.soundInst.length},c=function(t){t.soundEnd>0&&t.soundEnd>t.time&&(t.time=t.soundEnd),t.soundInst=null};a._hasTimelines=function(){return e?e.length>0:!1},a.toString=function(){return"[Animator version:"+a.VERSION+"]"},namespace("cloudkid").Animator=a}(),function(){"use strict";var t=function(t,n){this.initialize(t,n)},n=t.prototype;n.event=null,n.loops=0,n.initialize=function(t,n){this.event=t,this.loops=n||0},namespace("cloudkid").CharacterClip=t}(),function(){"use strict";var t=cloudkid.Animator,n=function(){this.initialize()},i=n.prototype;i._animationStack=null,i._currentAnimation=null,i._loops=0,i._interruptable=!0,i._allowFrameDropping=!1,i._character=null,i._callback=null,i._destroyed=!1,i.initialize=function(){this._animationStack=[]},i.setCharacter=function(t){this.clear(),this._character=t,this._character&&(Debug.assert(this._character instanceof createjs.MovieClip,"character must subclass MovieClip"),this._character.stop())},i.gotoFrameAndStop=function(n){Debug.assert(this._character,"gotoFrameAndStop() requires a character!"),t.stop(this._character),this._animationStack.length=0,this._character.gotoAndStop(n)},i.playClips=function(n,i,a,e,s){if(i=i||null,a=a||!0,e=e||!0,s=s||!0,Debug.assert(this._character,"playClips requires a character!"),this._interruptable){t.stop(this._character),this._interruptable=a,this._callback&&!e&&this._callback(!0),this._callback=i,this._animationStack.length=0;for(var o in n)this._animationStack.push(n[o]);this._allowFrameDropping=s,this.startNext()}},i.startNext=function(){if(this._loops=0,this._animationStack.length>0)this._currentAnimation=this._animationStack.shift(),t.play(this._character,this._currentAnimation.event,this._animationComplete.bind(this),[this],this._allowFrameDropping);else if(this._callback){this._interruptable=!0;var n=this._callback;this._callback=null,n(!1)}},i._animationComplete=function(){this._loops++,0===this._currentAnimation.loops||this._loops<this._currentAnimation.loops?t.play(this._character,this._currentAnimation.event,this._animationComplete.bind(this),null,this._allowFrameDropping):this._currentAnimation.loops==this._loops&&this.startNext()},i.clear=function(){this._character&&t.stop(this._character),this._currentAnimation=null,this._interruptable=!0,this._callback=null,this._animationStack.length=0,this._loops=0},i.destroy=function(){this._destroyed||(this._destroyed=!0,this.clear(),this._character=null,this._animationStack=null)},namespace("cloudkid").CharacterController=n}();