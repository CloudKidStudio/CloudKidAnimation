!function(){"use strict";var t=function(){},n=t.prototype;n.onComplete=null,n.onCompleteParams=null,n.event=null,n.instance=null,n.firstFrame=-1,n.lastFrame=-1,n.isLooping=!1,n.isLastFrame=!1,n.length=0,n.useCaptions=!1,n._paused=!1,Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){t!=this._paused&&(this._paused=!!t,this.soundInst&&(this.paused?this.soundInst.pause():this.soundInst.unpause()))}}),n.startTime=0,n.duration=0,n.speed=1,n.time=0,n.soundAlias=null,n.soundInst=null,n.playSound=!1,n.soundStart=0,n.soundEnd=0,namespace("cloudkid").AnimatorTimeline=t}(),function(t){"use strict";var n=cloudkid.OS,i=cloudkid.AnimatorTimeline,a=createjs.MovieClip,e=function(){};e.VERSION="2.2.9",e.debug=!1,e.soundLib=null,e.captions=null;var s=[],o=[],l={},r=!1,u={};e.init=function(){s=[],o=[],l={},r=!1},e.destroy=function(){e.stopAll(),s=null,o=null,l=null},e.play=function(n,i,a,o,r,c,p,d){var h;a&&"function"==typeof a?(h=a,a=u):a||(a=u),h=a.onComplete||h||null,o=a.onCompleteParams||o||null,r=a.startTime||r,r=r?.001*r:0,c=a.speed||c||1,d=a.doCancelledCallback||d||!1,p=a.soundData||p||null,s||e.init(),l[n.id]!==t&&e.stop(n,d);var m=e._makeTimeline(n,i,h,o,c,p);return m.firstFrame>-1&&m.lastFrame>-1?(m.time=-1==r?Math.random()*m.duration:r,n.elapsedTime=m.startTime+m.time,n.play(),n._tick(),e._hasTimelines()||e._startUpdate(),s.push(m),l[n.id]=m,m.soundStart>0&&e.audioLib.preloadSound&&e.soundLib.preloadSound(m.soundAlias),m):(h&&h.apply(null,o),null)},e.playAtRandomFrame=function(t,n,i,a,s,o,l){return e.play(t,n,i,a,-1,s,o,l)},e._makeTimeline=function(t,n,a,s,o,l){var r=new i;if(!e._canAnimate(t))return r;t.advanceDuringTicks=!1;var u;t.framerate?u=t.framerate:(u=cloudkid.OS.instance.options.fps,u||(u=cloudkid.OS.instance.fps),u||(u=15),t.framerate=u),r.instance=t,r.event=n,r.onComplete=a,r.onCompleteParams=s,r.speed=o,l&&(r.playSound=!0,"string"==typeof l?(r.soundStart=0,r.soundAlias=l):(r.soundStart=l.start>0?l.start:0,r.soundAlias=l.alias),r.useCaptions=e.captions&&e.captions.hasCaption(r.soundAlias));for(var c=t.getLabels(),p=n+"_stop",d=n+"_loop",h=0,m=c.length;m>h;++h){var _=c[h];if(_.label==n)r.firstFrame=_.position;else{if(_.label==p){r.lastFrame=_.position;break}if(_.label==d){r.lastFrame=_.position,r.isLooping=!0;break}}}return r.length=r.lastFrame-r.firstFrame,r.startTime=r.firstFrame/u,r.duration=r.length/u,r},e._canAnimate=function(n){return n instanceof a?!0:n.framerate!==t&&n.getLabels!==t&&n.elapsedTime!==t&&n._tick!==t&&n.gotoAndStop!==t&&n.play!==t&&n.id!==t?!0:!1},e.instanceHasAnimation=function(t,n){for(var i=t.getLabels(),a=-1,e=-1,s=n+"_stop",o=n+"_loop",l=0,r=i.length;r>l;++l){var u=i[l];if(u.label==n)a=u.position;else if(u.label==s||u.label==o){e=u.position;break}}return a>=0&&e>=0},e.stop=function(n,i){if(i=i||!1,s&&l[n.id]!==t){var a=l[n.id];e._remove(a,i)}},e.stopAll=function(t){if(e._hasTimelines())for(var n,i=s.slice(),a=0;a<i.length;a++)n=i[a],(!t||t.contains(n.instance))&&e._remove(n,!1)},e._remove=function(t,n){var i=o.indexOf(t);if(i>=0&&o.splice(i,1),i=s.indexOf(t),!(0>i)){var a=t.onComplete,r=t.onCompleteParams;t.instance.stop(),!n&&t.soundInst&&t.soundInst.stop(),s.splice(i,1),delete l[t.instance.id],t.useCaptions&&e.captions.stop(),t.instance=null,t.event=null,t.onComplete=null,t.onCompleteParams=null,e._hasTimelines()||e._stopUpdate(),n&&a&&a.apply(null,r)}},e.pause=function(){if(s&&!r){r=!0;for(var t=0;t<s.length;t++)s[t].paused=!0;e._stopUpdate()}},e.resume=function(){if(s&&r){r=!1;for(var t=0;t<s.length;t++)s[t].paused=!1;e._hasTimelines()&&e._startUpdate()}},e.pauseInGroup=function(t,n){if(e._hasTimelines()&&n)for(var i=0;i<s.length;i++)n.contains(s[i].instance)&&(s[i].paused=t)},e.getTimeline=function(n){return e._hasTimelines()?l[n.id]!==t?l[n.id]:null:null},e.getPaused=function(){return r},e._startUpdate=function(){n.instance&&n.instance.addUpdateCallback("Animator",e._update)},e._stopUpdate=function(){n.instance&&n.instance.removeUpdateCallback("Animator")},e._update=function(t){if(s){for(var n,i=.001*t,a=s.length-1;a>=0;--a){n=s[a];var l=n.instance;if(!n.paused){if(n.soundInst){if(!n.soundInst.isValid){o.push(n);continue}n.time=n.soundStart+.001*n.soundInst.position,n.useCaptions&&e.captions.seek(n.soundInst.position),n.time>=n.duration&&(l.gotoAndStop(n.lastFrame),o.push(n))}else n.time+=i*n.speed,n.time>=n.duration&&(n.isLooping?(n.time-=n.duration,n.onComplete&&n.onComplete.apply(null,n.onCompleteParams)):(l.gotoAndStop(n.lastFrame),o.push(n))),n.playSound&&n.time>=n.soundStart&&(n.time=n.soundStart,n.soundInst=e.audioLib.play(n.soundAlias,p.bind(this,n),c.bind(this,n)),n.useCaptions&&(e.captions.isSlave=!0,e.captions.run(n.soundAlias)));l.elapsedTime=n.startTime+n.time,l._tick()}}for(a=0;a<o.length;a++)n=o[a],e._remove(n,!0)}};var c=function(t){t.playSound=!1,t.soundEnd=t.soundStart+.001*t.soundInst.length},p=function(t){t.soundEnd>0&&t.soundEnd>t.time&&(t.time=t.soundEnd),t.soundInst=null};e._hasTimelines=function(){return s?s.length>0:!1},e.toString=function(){return"[Animator version:"+e.VERSION+"]"},namespace("cloudkid").Animator=e}(),function(){"use strict";var t=function(t,n){this.initialize(t,n)},n=t.prototype;n.event=null,n.loops=0,n.initialize=function(t,n){this.event=t,this.loops=n||0},namespace("cloudkid").CharacterClip=t}(),function(){"use strict";var t=cloudkid.Animator,n=function(){this.initialize()},i=n.prototype;i._animationStack=null,i._currentAnimation=null,i._loops=0,i._interruptable=!0,i._allowFrameDropping=!1,i._character=null,i._callback=null,i._destroyed=!1,i.initialize=function(){this._animationStack=[]},i.setCharacter=function(t){this.clear(),this._character=t,this._character&&(Debug.assert(this._character instanceof createjs.MovieClip,"character must subclass MovieClip"),this._character.stop())},i.gotoFrameAndStop=function(n){Debug.assert(this._character,"gotoFrameAndStop() requires a character!"),t.stop(this._character),this._animationStack.length=0,this._character.gotoAndStop(n)},i.playClips=function(n,i,a,e,s){if(i=i||null,a=a||!0,e=e||!0,s=s||!0,Debug.assert(this._character,"playClips requires a character!"),this._interruptable){t.stop(this._character),this._interruptable=a,this._callback&&!e&&this._callback(!0),this._callback=i,this._animationStack.length=0;for(var o in n)this._animationStack.push(n[o]);this._allowFrameDropping=s,this.startNext()}},i.startNext=function(){if(this._loops=0,this._animationStack.length>0)this._currentAnimation=this._animationStack.shift(),t.play(this._character,this._currentAnimation.event,this._animationComplete.bind(this),[this],this._allowFrameDropping);else if(this._callback){this._interruptable=!0;var n=this._callback;this._callback=null,n(!1)}},i._animationComplete=function(){this._loops++,0===this._currentAnimation.loops||this._loops<this._currentAnimation.loops?t.play(this._character,this._currentAnimation.event,this._animationComplete.bind(this),null,this._allowFrameDropping):this._currentAnimation.loops==this._loops&&this.startNext()},i.clear=function(){this._character&&t.stop(this._character),this._currentAnimation=null,this._interruptable=!0,this._callback=null,this._animationStack.length=0,this._loops=0},i.destroy=function(){this._destroyed||(this._destroyed=!0,this.clear(),this._character=null,this._animationStack=null)},namespace("cloudkid").CharacterController=n}();