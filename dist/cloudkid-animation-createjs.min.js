!function(){"use strict";var t=function(){},i=t.prototype;i.onComplete=null,i.onCompleteParams=null,i.event=null,i.instance=null,i.firstFrame=-1,i.lastFrame=-1,i.isLooping=!1,i.isLastFrame=!1,i.length=0,i.useCaptions=!1,i._paused=!1,Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){t!=this._paused&&(this._paused=!!t,this.soundInst&&(this.paused?this.soundInst.pause():this.soundInst.unpause()))}}),i.startTime=0,i.duration=0,i.speed=1,i.time=0,i.soundAlias=null,i.soundInst=null,i.playSound=!1,i.soundStart=0,i.soundEnd=0,namespace("cloudkid").AnimatorTimeline=t}(),function(t){"use strict";var i=cloudkid.OS,e=cloudkid.AnimatorTimeline,n=createjs.MovieClip,s=function(){};s.VERSION="2.3.1",s.debug=!1,s.soundLib=null,s.captions=null;var a=[],r=[],o={},l=!1,u={};s.init=function(){a=[],r=[],o={},l=!1},s.destroy=function(){s.stopAll(),a=null,r=null,o=null},s.play=function(i,e,n,r,l,h,c,p){var m;n&&"function"==typeof n?(m=n,n=u):n||(n=u),m=n.onComplete||m||null,r=n.onCompleteParams||r||null,l=n.startTime||l,l=l?.001*l:0,h=n.speed||h||1,p=n.doCancelledCallback||p||!1,c=n.soundData||c||null,a||s.init(),o[i.id]!==t&&s.stop(i,p);var _=s._makeTimeline(i,e,m,r,h,c);return _.firstFrame>-1&&_.lastFrame>-1?(_.time=-1==l?Math.random()*_.duration:l,i.elapsedTime=_.startTime+_.time,i.play(),i._tick(),s._hasTimelines()||s._startUpdate(),a.push(_),o[i.id]=_,_.soundStart>0&&s.audioLib.preloadSound&&s.soundLib.preloadSound(_.soundAlias),_):(m&&m.apply(null,r),null)},s.playAtRandomFrame=function(t,i,e,n,a,r,o){return s.play(t,i,e,n,-1,a,r,o)},s._makeTimeline=function(t,i,n,a,r,o){var l=new e;if(!s._canAnimate(t))return l;t.advanceDuringTicks=!1;var u;t.framerate?u=t.framerate:(u=cloudkid.OS.instance.options.fps,u||(u=cloudkid.OS.instance.fps),u||(u=15),t.framerate=u),l.instance=t,l.event=i,l.onComplete=n,l.onCompleteParams=a,l.speed=r,o&&(l.playSound=!0,"string"==typeof o?(l.soundStart=0,l.soundAlias=o):(l.soundStart=o.start>0?o.start:0,l.soundAlias=o.alias),l.useCaptions=s.captions&&s.captions.hasCaption(l.soundAlias));for(var h=t.getLabels(),c=i+"_stop",p=i+"_loop",m=0,_=h.length;_>m;++m){var d=h[m];if(d.label==i)l.firstFrame=d.position;else{if(d.label==c){l.lastFrame=d.position;break}if(d.label==p){l.lastFrame=d.position,l.isLooping=!0;break}}}return l.length=l.lastFrame-l.firstFrame,l.startTime=l.firstFrame/u,l.duration=l.length/u,l},s._canAnimate=function(i){return i instanceof n?!0:i.framerate!==t&&i.getLabels!==t&&i.elapsedTime!==t&&i._tick!==t&&i.gotoAndStop!==t&&i.play!==t&&i.id!==t?!0:!1},s.instanceHasAnimation=function(t,i){for(var e=t.getLabels(),n=-1,s=-1,a=i+"_stop",r=i+"_loop",o=0,l=e.length;l>o;++o){var u=e[o];if(u.label==i)n=u.position;else if(u.label==a||u.label==r){s=u.position;break}}return n>=0&&s>=0},s.stop=function(i,e){if(e=e||!1,a&&o[i.id]!==t){var n=o[i.id];s._remove(n,e)}},s.stopAll=function(t){if(s._hasTimelines())for(var i,e=a.slice(),n=0;n<e.length;n++)i=e[n],(!t||t.contains(i.instance))&&s._remove(i,!1)},s._remove=function(t,i){var e=r.indexOf(t);if(e>=0&&r.splice(e,1),e=a.indexOf(t),!(0>e)){var n=t.onComplete,l=t.onCompleteParams;t.instance.stop(),!i&&t.soundInst&&t.soundInst.stop(),a.splice(e,1),delete o[t.instance.id],t.useCaptions&&s.captions.stop(),t.instance=null,t.event=null,t.onComplete=null,t.onCompleteParams=null,s._hasTimelines()||s._stopUpdate(),i&&n&&n.apply(null,l)}},s.pause=function(){if(a&&!l){l=!0;for(var t=0;t<a.length;t++)a[t].paused=!0;s._stopUpdate()}},s.resume=function(){if(a&&l){l=!1;for(var t=0;t<a.length;t++)a[t].paused=!1;s._hasTimelines()&&s._startUpdate()}},s.pauseInGroup=function(t,i){if(s._hasTimelines()&&i)for(var e=0;e<a.length;e++)i.contains(a[e].instance)&&(a[e].paused=t)},s.getTimeline=function(i){return s._hasTimelines()?o[i.id]!==t?o[i.id]:null:null},s.getPaused=function(){return l},s._startUpdate=function(){i.instance&&i.instance.addUpdateCallback("Animator",s._update)},s._stopUpdate=function(){i.instance&&i.instance.removeUpdateCallback("Animator")},s._update=function(t){if(a){for(var i,e=.001*t,n=a.length-1;n>=0;--n){i=a[n];var o=i.instance;if(!i.paused){if(i.soundInst){if(!i.soundInst.isValid){r.push(i);continue}i.time=i.soundStart+.001*i.soundInst.position,i.useCaptions&&s.captions.seek(i.soundInst.position),i.time>=i.duration&&(o.gotoAndStop(i.lastFrame),r.push(i))}else i.time+=e*i.speed,i.time>=i.duration&&(i.isLooping?(i.time-=i.duration,i.onComplete&&i.onComplete.apply(null,i.onCompleteParams)):(o.gotoAndStop(i.lastFrame),r.push(i))),i.playSound&&i.time>=i.soundStart&&(i.time=i.soundStart,i.soundInst=s.audioLib.play(i.soundAlias,c.bind(this,i),h.bind(this,i)),i.useCaptions&&(s.captions.isSlave=!0,s.captions.run(i.soundAlias)));o.elapsedTime=i.startTime+i.time,o.advance()}}for(n=0;n<r.length;n++)i=r[n],s._remove(i,!0)}};var h=function(t){t.playSound=!1,t.soundEnd=t.soundStart+.001*t.soundInst.length},c=function(t){t.soundEnd>0&&t.soundEnd>t.time&&(t.time=t.soundEnd),t.soundInst=null};s._hasTimelines=function(){return a?a.length>0:!1},s.toString=function(){return"[Animator version:"+s.VERSION+"]"},namespace("cloudkid").Animator=s}(),function(){"use strict";var t=function(t,i){this.initialize(t,i)},i=t.prototype;i.event=null,i.loops=0,i.initialize=function(t,i){this.event=t,this.loops=i||0},namespace("cloudkid").CharacterClip=t}(),function(){"use strict";var t=cloudkid.Animator,i=function(){this.initialize()},e=i.prototype;e._animationStack=null,e._currentAnimation=null,e._loops=0,e._interruptable=!0,e._allowFrameDropping=!1,e._character=null,e._callback=null,e._destroyed=!1,e.initialize=function(){this._animationStack=[]},e.setCharacter=function(t){this.clear(),this._character=t,this._character&&(Debug.assert(this._character instanceof createjs.MovieClip,"character must subclass MovieClip"),this._character.stop())},e.gotoFrameAndStop=function(i){Debug.assert(this._character,"gotoFrameAndStop() requires a character!"),t.stop(this._character),this._animationStack.length=0,this._character.gotoAndStop(i)},e.playClips=function(i,e,n,s,a){if(e=e||null,n=n||!0,s=s||!0,a=a||!0,Debug.assert(this._character,"playClips requires a character!"),this._interruptable){t.stop(this._character),this._interruptable=n,this._callback&&!s&&this._callback(!0),this._callback=e,this._animationStack.length=0;for(var r in i)this._animationStack.push(i[r]);this._allowFrameDropping=a,this.startNext()}},e.startNext=function(){if(this._loops=0,this._animationStack.length>0)this._currentAnimation=this._animationStack.shift(),t.play(this._character,this._currentAnimation.event,this._animationComplete.bind(this),[this],this._allowFrameDropping);else if(this._callback){this._interruptable=!0;var i=this._callback;this._callback=null,i(!1)}},e._animationComplete=function(){this._loops++,0===this._currentAnimation.loops||this._loops<this._currentAnimation.loops?t.play(this._character,this._currentAnimation.event,this._animationComplete.bind(this),null,this._allowFrameDropping):this._currentAnimation.loops==this._loops&&this.startNext()},e.clear=function(){this._character&&t.stop(this._character),this._currentAnimation=null,this._interruptable=!0,this._callback=null,this._animationStack.length=0,this._loops=0},e.destroy=function(){this._destroyed||(this._destroyed=!0,this.clear(),this._character=null,this._animationStack=null)},namespace("cloudkid").CharacterController=i}(),function(t){var i=function(t,i){Array.isArray(t)?this._images=t:(this._images=[t],i=[i]),this.frames={};for(var e=0;e<this._images.length;++e){t=this._images[e];var s=i[e].frames;for(var a in s){var r=s[a],o=a.lastIndexOf(".");o>0&&(a=a.substring(0,o)),o=a.lastIndexOf("/"),0>o&&(a=a.substring(o+1)),this.frames[a]=new n(t,r)}}},e=i.prototype={};e.getFrame=function(t){return this.frames[t]||null},e.getFrames=function(i,e,n,s,a){s===t&&(s=4),0>s&&(s=0),a||(a=[]);var r,o,l=[],u=[];for(r=1;s>r;++r){var h="";o=1;for(var c=0;r>c;++c)h+="0",o*=10;l.unshift(h),u.push(o)}var p,m=u.length;for(r=e,len=n;len>=r;++r){var _=null;for(o=0;m>o;++o)if(r<u[o]){_=l[o]+r;break}_||(_=r.toString());var d=i.replace("#",_),f=this.frames[d];f&&(p=f),p&&a.push(p)}return a},e.destroy=function(){this.image=null,this.frames=null},namespace("cloudkid").TextureAtlas=i;var n=function(t,i){this.image=t;var e=i.frame;this.frame=new createjs.Rectangle(e.x,e.y,e.w,e.h),this.trimmed=i.trimmed,this.offset=new createjs.Point(i.spriteSourceSize.x,i.spriteSourceSize.y),this.width=i.sourceSize.w,this.height=i.sourceSize.h}}(),function(){function t(t,i){return t.position-i.position}var i=function(t,i){createjs.Container.call(this),this.mouseChildren=!1,this._bitmap=new createjs.Bitmap,this.addChild(this._bitmap),t&&i&&this.init(t,i)},e=i.prototype=new createjs.Container,n=createjs.Container.prototype;e.loop=!0,e.currentFrame=0,e.paused=!1,e.advanceDuringTicks=!0,Object.defineProperty(e,"framerate",{get:function(){return this._framerate},set:function(t){t>0?(this._framerate=t,this._duration=t?this._frames.length/t:0):this._framerate=this._duration=0}}),Object.defineProperty(e,"elapsedTime",{get:function(){return this._t},set:function(t){this._t=t}}),e._framerate=0,e._duration=0,e._t=0,e._prevPosition=0,e._bitmap=0,e._labels=0,e._frames=null,e._currentTexture=null,e._origin=null,e._scale=1,e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY)},e.draw=function(t,i){return this.DisplayObject_draw(t,i)?!0:(this._updateTimeline(),n.draw.call(this,t,i),!0)},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){this.paused||(this._framerate>0?(this.advanceDuringTicks&&(this._t+=.001*t),this._t>this._duration&&(this._t=this.loop?this._t-this._duration:this._duration),this._prevPosition=Math.floor(this._t*this._framerate),this._prevPosition>=this._frames.length&&(this._prevPosition=this._frames.length-1)):this.advanceDuringTicks&&(this._prevPosition=this._prevPosition+1),this._updateTimeline())},e.getLabels=function(){return this._labels},e.getCurrentLabel=function(){for(var t=this._labels,i=null,e=0,n=t.length;n>e&&t[e].position<=this.currentFrame;++e)i=t[e].label;return i},e.init=function(i,e){var n=this._labels=[];if(e.labels){for(var s in e.labels)n.push({label:s,position:e.labels[s]});n.sort(t)}this._frames=[];for(var a=0;a<e.frames.length;++a){var r=e.frames[a];i.getFrames(r.name,r.min,r.max,r.digits,this._frames)}e.fps?this.framerate=e.fps:this._framerate&&(this.framerate=this._framerate),this._scale=e.scale&&e.scale>0?1/e.scale:1,this._bitmap.scaleX=this._bitmap.scaleY=this._scale,this._origin=e.origin?new createjs.Point(e.origin.x*this._scale,e.origin.y*this._scale):new createjs.Point},e.copyFrom=function(t){this._frames=t._frames,this._labels=t._labels,this._origin=t._origin,this._framerate=t._framerate,this._duration=t._duration,this._scale=t._scale,this._bitmap.scaleX=this._bitmap.scaleY=this._scale},e.destroy=function(){this.removeAllChildren(),this._bitmap=null,this._frames=null,this._origin=null},e._tick=function(t){this.advance(t&&t.delta),n._tick.call(this,t)},e._goto=function(t){var i=null;if("string"==typeof t){for(var e=this._labels,n=0,s=e.length;s>n;++n)if(e[n].label==t){i=e[n].position;break}}else i=t;null!==i&&(this._prevPosition=i,this._t=this._framerate>0?i/this._framerate:0,this._updateTimeline())},e._updateTimeline=function(){if(this._prevPosition<0?this._prevPosition=0:this._prevPosition>=this._frames.length&&(this._prevPosition=this._frames.length-1),this.currentFrame=this._prevPosition,this._currentTexture!=this._frames[this.currentFrame]){var t=this._currentTexture=this._frames[this.currentFrame];this._bitmap.image=t.image,this._bitmap.sourceRect=t.frame,this._bitmap.x=-this._origin.x+t.offset.x*this._bitmap.scaleX,this._bitmap.y=-this._origin.y+t.offset.y*this._bitmap.scaleY}},e._reset=function(){this._prevPosition=0,this._t=0,this.currentFrame=0},namespace("cloudkid").BitmapMovieClip=i}();